@page "/tasks"
@inject Blazored.LocalStorage.ILocalStorageService localStorage

<PageTitle>Zadania</PageTitle>
<MudGrid Spacing="@spacing" Justify="Justify.Center">
    <MudItem>
        <MudCard Style="width: 270px">
            <MudCardMedia Image="/images/task1.jpeg" Height="200"/>
            <MudCardContent>
                <MudText Typo="Typo.h5">Przegląd ula</MudText>
                <RadzenDatePicker Style="width: 260px" TValue="DateTime?" Value="@DateTime.Now" ShowTime="true" ShowSeconds="true" HoursStep="1.5" MinutesStep="5" SecondsStep="10" Change=@(args => OnChange(args, "DatePicker with time", "MM/dd/yyyy HH:mm")) DateFormat="MM/dd/yyyy HH:mm" InitialViewDate="@DateTime.Now" Class="w-100"></RadzenDatePicker>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelową pasiekę" Data="@Pasieki" TValue="string" TextProperty="Wybierz docelową pasiekę"></RadzenDropDown>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelowy Ul" Data="@Ule" TValue="string" TextProperty="Wybierz docelowy ul"></RadzenDropDown>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Dodaj</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
    <MudItem>
        <MudCard Style="width: 270px">
            <MudCardMedia Image="/images/task2.jpeg" Height="200" />
            <MudCardContent>
                <MudText Typo="Typo.h5">Wymiana ramek</MudText>
                <RadzenDatePicker TValue="DateTime?" Value="@DateTime.Now" ShowTime="true" ShowSeconds="true" HoursStep="1.5" MinutesStep="5" SecondsStep="10" Change=@(args => OnChange(args, "DatePicker with time", "MM/dd/yyyy HH:mm")) DateFormat="MM/dd/yyyy HH:mm" InitialViewDate="@DateTime.Now" Class="w-100"></RadzenDatePicker>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelową pasiekę" Data="@Pasieki" TValue="string" TextProperty="Wybierz docelową pasiekę"></RadzenDropDown>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelowy Ul" Data="@Ule" TValue="string" TextProperty="Wybierz docelowy ul"></RadzenDropDown>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Dodaj</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
    <MudItem>
        <MudCard Style="width: 270px">
            <MudCardMedia Image="/images/task2.jpeg" Height="200" />
            <MudCardContent>
                <MudText Typo="Typo.h5">Karmienie</MudText>
                <RadzenDatePicker TValue="DateTime?" Value="@DateTime.Now" ShowTime="true" ShowSeconds="true" HoursStep="1.5" MinutesStep="5" SecondsStep="10" Change=@(args => OnChange(args, "DatePicker with time", "MM/dd/yyyy HH:mm")) DateFormat="MM/dd/yyyy HH:mm" InitialViewDate="@DateTime.Now" Class="w-100"></RadzenDatePicker>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelową pasiekę" Data="@Pasieki" TValue="string" TextProperty="Wybierz docelową pasiekę"></RadzenDropDown>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelowy Ul" Data="@Ule" TValue="string" TextProperty="Wybierz docelowy ul"></RadzenDropDown>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Dodaj</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
    <MudItem>
        <MudCard Style="width: 270px">
            <MudCardMedia Image="/images/task2.jpeg" Height="200" />
            <MudCardContent>
                <MudText Typo="Typo.h5">Wymiana matki</MudText>
                <RadzenDatePicker TValue="DateTime?" Value="@DateTime.Now" ShowTime="true" ShowSeconds="true" HoursStep="1.5" MinutesStep="5" SecondsStep="10" Change=@(args => OnChange(args, "DatePicker with time", "MM/dd/yyyy HH:mm")) DateFormat="MM/dd/yyyy HH:mm" InitialViewDate="@DateTime.Now" Class="w-100"></RadzenDatePicker>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelową pasiekę" Data="@Pasieki" TValue="string" TextProperty="Wybierz docelową pasiekę"></RadzenDropDown>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelowy Ul" Data="@Ule" TValue="string" TextProperty="Wybierz docelowy ul"></RadzenDropDown>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Dodaj</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
    <MudItem>
        <MudCard Style="width: 270px">
            <MudCardMedia Image="/images/task2.jpeg" Height="200" />
            <MudCardContent>
                <MudText Typo="Typo.h5">Miodobranie</MudText>
                <RadzenDatePicker TValue="DateTime?" Value="@DateTime.Now" ShowTime="true" ShowSeconds="true" HoursStep="1.5" MinutesStep="5" SecondsStep="10" Change=@(args => OnChange(args, "DatePicker with time", "MM/dd/yyyy HH:mm")) DateFormat="MM/dd/yyyy HH:mm" InitialViewDate="@DateTime.Now" Class="w-100"></RadzenDatePicker>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelową pasiekę" Data="@Pasieki" TValue="string" TextProperty="Wybierz docelową pasiekę"></RadzenDropDown>
                <RadzenDropDown Style="width: 238px" Placeholder="Wybierz docelowy Ul" Data="@Ule" TValue="string" TextProperty="Wybierz docelowy ul"></RadzenDropDown>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Dodaj</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
</MudGrid>

@code {
    protected override async Task OnInitializedAsync()
    {
        var k = await localStorage.KeysAsync();
        foreach (var item in k)
        {
            if (item.Contains("Pasieka"))
            {
                Pasieki.Add(item.Replace("Pasieka",""));
                continue;
            }
            if (item.Contains("Ul"))
            {
                Ule.Add(item.Replace("Ul",""));
                continue;
            }
        }
    }
    const int spacing = 5;
    List<string> Pasieki = new();
    List<string> Ule = new();
    void OnChange(DateTime? value, string name, string format)
    {
    }


}